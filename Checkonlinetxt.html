
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Check Ver 35</title>
</head>
<style>
 #selectedItem {
    display: none;
  }
.container {
    display: flex;
    flex-direction: row;
    justify-content: space-around;
  }
  .column {
    flex: 1;
    max-width: 11%; /* Adjust based on your preference */
    margin: 0 1px; /* Adjust the space between columns */
    padding: 11px; /* Space between columns */
  }
  .textbox {
    width: 100%;
    margin-bottom: 10px; /* Space between textboxes */
  }
    .green {
        background-color: lightgreen;
    }
    .red {
        background-color: lightcoral;
    }
    
     .highlight {
            background-color: #B4D5FF;
        }
</style>
<body onload="focustextbox1()">
 
<div class="container">
  <div id="myDiv"   class="column">
    <p id="x1"></p>
    <!-- Repeat for each column -->
    <input type="text" id="Textbox 1" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="1" ondblclick="compareTextBoxes1()" onkeydown="moveToNextTextbox(event, 2)"  onkeyup='check1();'>
    <input type="text" id="Textbox 2" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="2" ondblclick="compareTextBoxes2()" onkeydown="moveToNextTextbox(event, 3)" onkeyup='check2();'>
    <input type="text" id="Textbox 3" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="3" ondblclick="compareTextBoxes3()" onkeydown="moveToNextTextbox(event, 4)" onkeyup='check3();'> 
    <input type="text" id="Textbox 4" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="4" ondblclick="compareTextBoxes4()" onkeydown="moveToNextTextbox(event, 5)" onkeyup='check4();'>
    <input type="text" id="Textbox 5" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="5" ondblclick="compareTextBoxes5()" onkeydown="moveToNextTextbox(event, 6)" onkeyup='check5();'>
    <input type="text" id="Textbox 6" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="6" ondblclick="compareTextBoxes6()" onkeydown="moveToNextTextbox(event, 7)" onkeyup='check6();'>
    <input type="text" id="Textbox 7" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="7" ondblclick="compareTextBoxes7()" onkeydown="moveToNextTextbox(event, 8)" onkeyup='check7();'>
    <input type="text" id="Textbox 8" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="8" ondblclick="compareTextBoxes8()" onkeydown="moveToNextTextbox(event, 9)" onkeyup='check8();'>
    <input type="text" id="Textbox 9" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="9" ondblclick="compareTextBoxes9()" onkeydown="moveToNextTextbox(event, 10)" onkeyup='check9();'>
    <input type="text" id="Textbox 10" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="10" ondblclick="compareTextBoxes10()" onkeydown="moveToNextTextbox(event, 11)" onkeyup='check10();'>
<!-- Save button 1 -->
<br>
<button onclick="saveData1()">S1</button>

<!-- Recall button -->
<button onclick="recallData1()">R1</button>

<!-- Save button 2 -->

<button onclick="saveData2()">S2</button>

<!-- Recall button -->
<button onclick="recallData2()">R2</button>

  </div>

       <div id="myDiv1" class="column">
              <p id="x2"></p>
              <!-- Add textboxes similar to Column 1 -->
			    <input type="text" id="Textbox 11" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="11" ondblclick="compareTextBoxes1()" onkeydown="moveToNextTextbox(event, 12)" onkeyup='check1();'>
    			<input type="text" id="Textbox 12" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="12" ondblclick="compareTextBoxes2()" onkeydown="moveToNextTextbox(event, 13)" onkeyup='check2();'>
    			<input type="text" id="Textbox 13" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="13" ondblclick="compareTextBoxes3()" onkeydown="moveToNextTextbox(event, 14)" onkeyup='check3();'>
		    	<input type="text" id="Textbox 14" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="14" ondblclick="compareTextBoxes4()" onkeydown="moveToNextTextbox(event, 15)" onkeyup='check4();'>
    			<input type="text" id="Textbox 15" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="15" ondblclick="compareTextBoxes5()" onkeydown="moveToNextTextbox(event, 16)" onkeyup='check5();'>
  			  <input type="text" id="Textbox 16" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="16" ondblclick="compareTextBoxes6()" onkeydown="moveToNextTextbox(event, 17)" onkeyup='check6();'>
 			    <input type="text" id="Textbox 17" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="17" ondblclick="compareTextBoxes7()" onkeydown="moveToNextTextbox(event, 18)" onkeyup='check7();'>
  			  <input type="text" id="Textbox 18" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="18" ondblclick="compareTextBoxes8()" onkeydown="moveToNextTextbox(event, 19)" onkeyup='check8();'>
   		    <input type="text" id="Textbox 19" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="19" ondblclick="compareTextBoxes9()" onkeydown="moveToNextTextbox(event, 20)" onkeyup='check9();'>
  			  <input type="text" id="Textbox 20" onfocus="textboxlocation()" oninput="toUpperCase(this)" tabindex="20" ondblclick="compareTextBoxes10()" onkeydown="moveToNextTextbox(event, 1)" onkeyup='check10();'>

                        <button onclick="clearTextboxes()">RESET(F6)</button>
        </div>




         <div id="myDiv2" class="column">
   
              <!-- Add textboxes similar to Column 1 -->
 			<input type="text" id="textInput" tabindex="-1"  oninput="splitText()" placeholder="Enter text" onkeyup='res1();'>
                           <br>
  			<input type="text" id="box1" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>
  			<input type="text" id="box2" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>	
			<input type="text" id="box3" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>
 			<input type="text" id="box4" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>
  			<input type="text" id="box5" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>
 			<input type="text" id="box6" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res1();'>
 			<input type="text" id="box7" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res1();'>
 			<input type="text" id="box8" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res1();'>
 			<input type="text" id="box9" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res1();'>
  			<input type="text" id="box10" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res1();'>
                     
                        <br>
			<input type="text"  tabindex="-1" id="joinedResultsss" >
          </div>

  <div id="myDiv3" class="column">
   
    <!-- Add textboxes similar to Column 1 -->


 <br>

  <input type="text" id="result1" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result2" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result3" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result4" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result5" tabindex="-1" onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result6" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result7" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result8" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result9" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res0();'>
 <input type="text" id="result10" tabindex="-1"  onkeydown="moveTo(event)" onkeyup='res0();'>
  <input type="text" tabindex="-1"  id="joinedResult" >
  </div>

 <div id="myDiv4" class="column">
<input type="text" tabindex="-1"  onkeyup='selectFirstItem()' id="searchInput" oninput="search()">
<br>

<select id="resultsList" size="5" tabindex="-1"  onchange="displayDetails()"  onkeyup='res0();'>
</select>
<br>
</div>

  
<div id="myDiv5" class="column">


<input type="text" id="searchTerm" oninput="searchText()">
<br>

<select id="searchResults" size="5" oninput="displaySelectedItem()" </select>
<input type="text" id="selectedItem" readonly>

</div>

 <div id="myDiv6" class="column">


<input type="file" id="fileInput">


</div>

</div>



<script>

const username = 'htdhtdhtd2003';
const repo = 'checker';
const filePath = 'ndc.txt';
const token = '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'; // ⚠️ Don't expose this publicly!

function searchText() {
    const searchTerm = document.getElementById('searchTerm').value.trim().toLowerCase();
    const searchResults = document.getElementById('searchResults');
    searchResults.innerHTML = ''; // Clear previous results

    if (!searchTerm) {
        alert('Please enter a search term.');
        return;
    }

    const url = `https://api.github.com/repos/${username}/${repo}/contents/${filePath}`;

    fetch(url, {
        headers: {
            Authorization: `token ${token}`,
            Accept: 'application/vnd.github.v3.raw' // get raw file content
        }
    })
    .then(response => {
        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        return response.text();
    })
    .then(text => {
        const lines = text.split('\n');
        lines.forEach((line, index) => {
            if (line.toLowerCase().includes(searchTerm)) {
                const option = document.createElement('option');
                option.text = `Line ${index + 1}: ${line}`;
                searchResults.add(option);
            }
        });
        if (searchResults.options.length === 0) {
            const option = document.createElement('option');
            option.text = 'No matches found.';
            searchResults.add(option);
        }
    })
    .catch(error => {
        alert('Error: ' + error.message);
    });
}



function displaySelectedItem() {
    var selectedItem = document.getElementById('searchResults').value;
    document.getElementById('selectedItem').value = selectedItem;
    splitTextfile();
}


function splitTextfile() {
      var textInput =  document.getElementById('selectedItem').value;
          
      //remove dashes from ndc on search 
       var inputText = textInput;
       var textlength1 = textInput.length-2
       var textlength2 = textInput.length
    var outputText = inputText.substring(0, textInput.length-8) +inputText.substring(textInput.length - 7 , textInput.length-3) +inputText.substring(textlength1 , textInput.length)
     textInput = outputText;
     //***********************************
      var textInput = textInput.toUpperCase()
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAPSULE", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAP", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("TABLET", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("MG", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      
      var textInput = trimmedText.replace(/\//g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\\/g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/-/g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/,/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\(/g, "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/\)/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
     var textInput = trimmedText.replace(/%/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      var textInput = trimmedText.replace(new RegExp("ORAL",'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput  = trimmedText.replace(new RegExp("TAB", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     
const selectedItem = trimmedText
    const [result1, result2, result3, result4, result5, result6, result7, result8, result9, result10] = selectedItem.split(' ');

    document.getElementById('result1').value = result1 || '';
    document.getElementById('result2').value = result2 || '';
    document.getElementById('result3').value = result3 || '';
    document.getElementById('result4').value = result4 || '';
    document.getElementById('result5').value = result5 || '';
    document.getElementById('result6').value = result6 || '';
    document.getElementById('result7').value = result7 || '';
    document.getElementById('result8').value = result8 || '';
    document.getElementById('result9').value = result9 || '';
    document.getElementById('result10').value = result10 || '';
    //clear ndc 
    for (var i = 1; i <= 10; i++) {
       var inputText = document.getElementById('result' + i).value;

    
    // Use isNaN() function to check if the input is not a number
    if (!isNaN(inputText) && inputText.length === 11) {
     document.getElementById('result' + i).value = ""
     } else 
     {document.getElementById('result' + i).value =  document.getElementById('result' + i).value;
    }
     }
// call combine textbox for search
     replacesearch();
     res0();
    
}

// arrowkeys to move between box
document.addEventListener("keydown", function(event) {
  if (event.ctrlKey && event.key === "ArrowDown") {
    event.preventDefault();
    if (document.getElementsByTagName('tabindex') !== -1){
    moveFocus(1);}
  } else if (event.ctrlKey && event.key === "ArrowUp") {
    event.preventDefault();
    if (document.getElementsByTagName('tabindex') !== -1){
      moveFocus(-1);}
  }
  else if (event.ctrlKey && event.key === "ArrowRight") {
    event.preventDefault();
    if (document.getElementsByTagName('tabindex') !== -1){
      moveFocus(10);}
  }
  else if (event.ctrlKey && event.key === "ArrowLeft" ) {
    event.preventDefault();
    if (document.getElementsByTagName('tabindex') !== -1){
        moveFocus(-10);}
  }
});

function moveFocus(step) {
  const inputs = document.getElementsByTagName('input');
  
  let currentIndex = -1;
  for (let i = 0; i < inputs.length; i++) {
    if (document.activeElement === inputs[i]) {
      currentIndex = i;
      break;
    }
  }
  let newIndex = currentIndex + step;
  if (newIndex < 0) {
    newIndex = inputs.length - 1;
  } else if (newIndex >= inputs.length) {
    newIndex = 0;
  }
  inputs[newIndex].focus();
}



// compare Textbox 1 and Textbox 11

function compareTextBoxes1() {
  const textbox1 = document.getElementById('Textbox 1');
  const textbox11 = document.getElementById('Textbox 11');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 2 and Textbox 12

function compareTextBoxes2() {
  const textbox1 = document.getElementById('Textbox 2');
  const textbox11 = document.getElementById('Textbox 12');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 3 and Textbox 13

function compareTextBoxes3() {
  const textbox1 = document.getElementById('Textbox 3');
  const textbox11 = document.getElementById('Textbox 13');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 4 and Textbox 14

function compareTextBoxes4() {
  const textbox1 = document.getElementById('Textbox 4');
  const textbox11 = document.getElementById('Textbox 14');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  //compareInputs()
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}


// compare Textbox 5 and Textbox 15

function compareTextBoxes5() {
  const textbox1 = document.getElementById('Textbox 5');
  const textbox11 = document.getElementById('Textbox 15');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 6 and Textbox 16

function compareTextBoxes6() {
  const textbox1 = document.getElementById('Textbox 6');
  const textbox11 = document.getElementById('Textbox 16');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}


// compare Textbox 7 and Textbox 17

function compareTextBoxes7() {
  const textbox1 = document.getElementById('Textbox 7');
  const textbox11 = document.getElementById('Textbox 17');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 8 and Textbox 18

function compareTextBoxes8() {
  const textbox1 = document.getElementById('Textbox 8');
  const textbox11 = document.getElementById('Textbox 18');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 9 and Textbox 19

function compareTextBoxes9() {
  const textbox1 = document.getElementById('Textbox 9');
  const textbox11 = document.getElementById('Textbox 19');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}

// compare Textbox 10 and Textbox 20

function compareTextBoxes10() {
  const textbox1 = document.getElementById('Textbox 10');
  const textbox11 = document.getElementById('Textbox 20');
  const text1 = textbox1.value;
  const text11 = textbox11.value;
  
  let diffIndex = 0;
  while (diffIndex < text1.length && diffIndex < text11.length && text1[diffIndex] === text11[diffIndex]) {
    diffIndex++;
  }

  textbox1.selectionStart = diffIndex;
  textbox1.selectionEnd = diffIndex;
  textbox11.selectionStart = diffIndex;
  textbox11.selectionEnd = diffIndex;
}


// save1
function saveData1() {
    var data = [];
    for (var i = 1; i <= 20; i++) {
        var input = document.getElementById('Textbox ' + i);
        data.push(input.value);
    }
    localStorage.setItem('savedData', JSON.stringify(data));
    clearTextboxes(); // Call the function to clear textboxes
                clearListBox(); // clear listbox
                reloadPage(); //reloadPage
    // alert('Data saved successfully!');
}

function recallData1() {
    var savedData = JSON.parse(localStorage.getItem('savedData'));
    if (savedData) {
        for (var i = 0; i < savedData.length; i++) {
            var input = document.getElementById('Textbox ' + (i + 1));
            input.value = savedData[i];
        }
        // alert('Data recalled successfully!');
    } else {
        // alert('No saved data found.');
    }
    check1();
              check2();
              check3();
              check4();
              check5();
              check6();
              check7();
              check8();
              check9();
              check10();
              document.getElementById('Textbox 11').focus(); // 3-7
}


// save2 and recall 2
function saveData2() {
    var data2 = [];
    for (var i = 1; i <= 20; i++) {
        var input2 = document.getElementById('Textbox ' + i);
        data2.push(input2.value);
    }
    localStorage.setItem('savedData2', JSON.stringify(data2));
    // alert('Data saved successfully!');
    clearTextboxes(); // Call the function to clear textboxes
                clearListBox(); // clear listbox
                reloadPage(); //reloadPage
}

function recallData2() {
    var savedData2 = JSON.parse(localStorage.getItem('savedData2'));
    if (savedData2) {
        for (var i = 0; i < savedData2.length; i++) {
            var input2 = document.getElementById('Textbox ' + (i + 1));
            input2.value = savedData2[i];
        }
        // alert('Data recalled successfully!');
    } else {
        // alert('No saved data found.');
    }
    check1();
              check2();
              check3();
              check4();
              check5();
              check6();
              check7();
              check8();
              check9();
              check10();
              document.getElementById('Textbox 11').focus(); // 3-7
}



//setfocus to textbox 1 on startup
function focustextbox1() {
document.getElementById('Textbox 1').focus()
};

function reloadPage() {
    window.location.reload(true); // Perform a hard reload

}



function toggleDiv() {
    var div = document.getElementById("myDiv");
     if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
}

function toggleDiv1() {
    var div = document.getElementById("myDiv1");
    if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
}
function toggleDiv2() {
    var div = document.getElementById("myDiv2");
    if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
}

function toggleDiv3() {
    var div = document.getElementById("myDiv3");
    if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
}

function toggleDiv4() {
    var div = document.getElementById("myDiv4");
    if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
}

function toggleDiv23() {
    var div = document.getElementById("myDiv2");
       
    if (div.style.display === "none") {
        div.style.display = "block"; // Show the div
    } else {
        div.style.display = "none"; // Hide the div
    }
    toggleDiv3();
    toggleDiv4();
    document.getElementById("Textbox 1").focus();
}



var searchfilter = ""
 // function to split input
function splitText() {
      var textInput = document.getElementById("textInput").value;
      var textInput = textInput.toUpperCase()
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAPSULE", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAP", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("TABLET", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("MG", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\\/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/-/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/,/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\(/g, "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/\)/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
     var textInput = trimmedText.replace(/%/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      var textInput = trimmedText.replace(new RegExp("ORAL",'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput  = trimmedText.replace(new RegExp("TAB", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var replacedText = trimmedText
      var words = replacedText.split(" ");
      var numBoxes = Math.min(words.length, 10); // Limit to 10 input boxes
      
      for (var i = 0; i < 10; i++) {
        if (i < numBoxes) {
          document.getElementById("box" + (i + 1)).value = words[i];
        } else {
          document.getElementById("box" + (i + 1)).value = "";
        }
      }
    }
    

  
  
// select first item on search list
function selectFirstItem() {
  if (event.key === 'Enter') { // Check if Enter key is pressed
    event.preventDefault(); // Prevent default Enter behavior (form submission)
    var fileInput = document.getElementById('fileInput');
    var fileList = fileInput.files;

    if (fileList.length !== 0) {
     
    
    document.getElementById("searchTerm").value = document.getElementById("searchInput").value
    searchText();
    } 
    //else {
      //  alert("Please select a file.");
        //return;
    //}
    var listbox = document.getElementById("resultsList");
    listbox.selectedIndex = 0; // Set the selectedIndex to 0 to select the first item
    displayDetails(); // 3-4-2024
    
    listbox.focus();
    check(); 3-7
  }
}


  // Function to search the database
 
  function res1(){
const result00 = document.getElementById('box1').value;
    const result11 = document.getElementById('box2').value;
const result22 = document.getElementById('box3').value;
const result33 = document.getElementById('box4').value;
const result44 = document.getElementById('box5').value;
const result55 = document.getElementById('box6').value;
const result66 = document.getElementById('box7').value;
const result77 = document.getElementById('box8').value;
const result88 = document.getElementById('box9').value;
const result99 = document.getElementById('box10').value;
   document.getElementById('joinedResultsss').value = result00.toUpperCase() + result11.toUpperCase() + result22.toUpperCase() + result33.toUpperCase() + result44.toUpperCase() + result55.toUpperCase() + result66.toUpperCase() + result77.toUpperCase() + result88.toUpperCase() + result99.toUpperCase();
 check();
}
// **********************************
  function search() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const resultsList = document.getElementById('resultsList');
    resultsList.innerHTML = '';

    for (let item of database) {
      if (item.toLowerCase().includes(searchTerm)) {
        const option = document.createElement('option');
        option.text = item;
        resultsList.add(option);
      }
    }
    
  }
  
  // **********************************
       document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {                   // 3-8-2024 change clear hotkey to Escape button
                event.preventDefault();
                const activeTextbox = document.activeElement;
                if (activeTextbox.tagName === 'INPUT') {
                    activeTextbox.value = '';
                }
            }
        });
        
        // **************************
     function res0(){const result1 = document.getElementById('result1').value;
    const result2 = document.getElementById('result2').value;
    const result3 = document.getElementById('result3').value;
    const result4 = document.getElementById('result4').value;
    const result5 = document.getElementById('result5').value;
    const result6 = document.getElementById('result6').value;
    const result7 = document.getElementById('result7').value;
    const result8 = document.getElementById('result8').value;
    const result9 = document.getElementById('result9').value;
    const result10 = document.getElementById('result10').value;
    
   document.getElementById('joinedResult').value = result1.toUpperCase() + result2.toUpperCase() + result3.toUpperCase() + result4.toUpperCase() + result5.toUpperCase() + result6.toUpperCase() + result7.toUpperCase() + result8.toUpperCase() + result9.toUpperCase() + result10.toUpperCase();

const result00 = document.getElementById('box1').value;
    const result11 = document.getElementById('box2').value;
const result22 = document.getElementById('box3').value;
const result33 = document.getElementById('box4').value;
const result44 = document.getElementById('box5').value;
const result55 = document.getElementById('box6').value;
const result66 = document.getElementById('box7').value;
const result77 = document.getElementById('box8').value;
const result88 = document.getElementById('box9').value;
const result99 = document.getElementById('box10').value;
   document.getElementById('joinedResultsss').value = result00.toUpperCase() + result11.toUpperCase() + result22.toUpperCase() + result33.toUpperCase() + result44.toUpperCase() + result55.toUpperCase() + result66.toUpperCase() + result77.toUpperCase() + result88.toUpperCase() + result99.toUpperCase();
     check()
     }
     
     
    // ************************************************ 
     
     
         document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
              check1();
              check2();
              check3();
              check4();
              check5();
              check6();
              check7();
              check8();
              check9();
              check10();
              replacesearch(); //call replacesearch
                const result1 = document.getElementById('result1').value;
    const result2 = document.getElementById('result2').value;
    const result3 = document.getElementById('result3').value;
    const result4 = document.getElementById('result4').value;
    const result5 = document.getElementById('result5').value;
    const result6 = document.getElementById('result6').value;
    const result7 = document.getElementById('result7').value;
    const result8 = document.getElementById('result8').value;
    const result9 = document.getElementById('result9').value;
    const result10 = document.getElementById('result10').value;
    
   document.getElementById('joinedResult').value = result1.toUpperCase() + result2.toUpperCase() + result3.toUpperCase() + result4.toUpperCase() + result5.toUpperCase() + result6.toUpperCase() + result7.toUpperCase() + result8.toUpperCase() + result9.toUpperCase() + result10.toUpperCase();

const result11 = document.getElementById('box1').value;
    const result22 = document.getElementById('box2').value;
   document.getElementById('joinedResultsss').value = result11.toUpperCase() + result22.toUpperCase();
            }
        });
  // ****Function to display details when an item is selected
  function displayDetails() {
    replaceresultslist();
    const selectedItem = searchfilter
    const [result1, result2, result3, result4, result5, result6, result7, result8, result9, result10] = selectedItem.split(' ');

    document.getElementById('result1').value = result1 || '';
    document.getElementById('result2').value = result2 || '';
    document.getElementById('result3').value = result3 || '';
    document.getElementById('result4').value = result4 || '';
    document.getElementById('result5').value = result5 || '';
    document.getElementById('result6').value = result6 || '';
    document.getElementById('result7').value = result7 || '';
    document.getElementById('result8').value = result8 || '';
    document.getElementById('result9').value = result9 || '';
    document.getElementById('result10').value = result10 || '';
    //clear ndc 
    for (var i = 1; i <= 10; i++) {
       var inputText = document.getElementById('result' + i).value;

    
    // Use isNaN() function to check if the input is not a number
    if (!isNaN(inputText) && inputText.length === 11) {
     document.getElementById('result' + i).value = ""
     } else 
     {document.getElementById('result' + i).value =  document.getElementById('result' + i).value;
    }
     }
     
    // call combine textbox for search
     replacesearch();
     res0();
    
  }
 
 //resultslist filter for <>\/%
 
 function replaceresultslist() {

       var textInput = document.getElementById('resultsList').value;
      //remove dashes from ndc on search 
       var inputText = textInput;
       var textlength1 = textInput.length-2
       var textlength2 = textInput.length
    var outputText = inputText.substring(0, textInput.length-8) +inputText.substring(textInput.length - 7 , textInput.length-3) +inputText.substring(textlength1 , textInput.length)
     textInput = outputText;
     //***********************************
      var textInput = textInput.toUpperCase()
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAPSULE", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAP", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("TABLET", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("MG", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      
      var textInput = trimmedText.replace(/\//g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\\/g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/-/g, ' ');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/,/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\(/g, "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/\)/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
     var textInput = trimmedText.replace(/%/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      var textInput = trimmedText.replace(new RegExp("ORAL",'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput  = trimmedText.replace(new RegExp("TAB", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
       searchfilter = trimmedText
     
 }
 
 // find and replace search results (),\/*
 function replacesearch() {
 for (var i = 1; i <= 10; i++) {
       var textInput = document.getElementById('result' + i).value;
      var textInput = textInput.toUpperCase()
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAPSULE", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("CAP", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("TABLET", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(new RegExp("MG", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\\/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/-/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\//g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/,/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput = trimmedText.replace(/\(/g, "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
     var textInput = trimmedText.replace(/\)/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
     var textInput = trimmedText.replace(/%/g, '');
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      
      var textInput = trimmedText.replace(new RegExp("ORAL",'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
      var textInput  = trimmedText.replace(new RegExp("TAB", 'g'), "");
      var trimmedText = textInput.replace(/\s+/g, ' ').trim();
       document.getElementById('result' + i).value = trimmedText
     }
 }
  // Function to clear a specific textbox
  function clearTextbox(id) {
    document.getElementById(id).value = '';
  }
  
  function check() {
        var textbox1 = document.getElementById("joinedResult").value;
        var textbox2 = document.getElementById("joinedResultsss").value;
        var textbox1Element = document.getElementById("joinedResult");
        var textbox2Element = document.getElementById("joinedResultsss");
        
        if (textbox1 == text
